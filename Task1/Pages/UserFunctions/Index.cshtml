@page
@model Task1.Pages.UserFunctions.IndexModel
@{
}


<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="~/Bootstrap Design/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
          rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="~/Bootstrap Design/css/sb-admin-2.min.css" rel="stylesheet">
    <title>Sales Order!</title>

</head>

<body class="bg-gradient-primary">

    <div class="container">

        <div class="card o-hidden border-0 shadow-lg my-5">
            <div class="card-body p-0">
                <!-- Nested Row within Card Body -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="p-5">
                            <div class="text-center">
                                <h1 class="h4 text-gray-900 mb-4">Sales Order!</h1>
                            </div>
                            <form id="Sales_Order_Form" novalidate>
                                <div class="form-group row">
                                    <div class="col-sm-6">
                                        <input class="form-control form-control-user" id="CustomerName" name="CustomerName" placeholder="Customer Name" data-error="#errCustomerName">
                                        <span class="text-danger" id="errCustomerName"></span>
                                    </div>

                                    <div class="col-sm-6">
                                        <input class="form-control form-control-user" id="InvoiceNo" name="InvoiceNo" placeholder="Invoice No." data-error="#errInvoiceNo">
                                        <span class="text-danger" id="errInvoiceNo"></span>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <div class="col-sm-6">
                                        <input class="form-control form-control-user" id="Address1" name="Address1" placeholder="Address 1" data-error="#errAddress1">
                                        <span class="text-danger" id="errAddress1"></span>
                                    </div>

                                    <div class="col-sm-6">
                                        <input class="form-control form-control-user" id="InvoiceDate" name="InvoiceDate" placeholder="Invoice Date" data-error="#errInvoiceDate">
                                        <span class="text-danger" id="errInvoiceDate"></span>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <div class="col-sm-6">
                                        <input class="form-control form-control-user" id="Address2" name="Address2" placeholder="Address 2" data-error="#errAddress2">
                                        <span class="text-danger" id="errAddress2"></span>
                                    </div>

                                    <div class="col-sm-6">
                                        <input class="form-control form-control-user" id="ReferenceNo" name="ReferenceNo" placeholder="Reference No" data-error="#errReferenceNo">
                                        <span class="text-danger" id="errReferenceNo"></span>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <div class="col-sm-6">
                                        <div class="form-group row">
                                            <div class="col-sm-12">
                                                <input class="form-control form-control-user" id="Address3" name="Address3" placeholder="Address 3" data-error="#errAddress3">
                                                <span class="text-danger" id="errAddress3"></span>
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <div class="col-sm-12">
                                                <input class="form-control form-control-user" id="State" name="State" placeholder="State" data-error="#errState">
                                                <span class="text-danger" id="errState"></span>
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <div class="col-sm-12">
                                                <input class="form-control form-control-user" id="PostCode" name="PostCode" placeholder="Post Code" data-error="#errPostCode">
                                                <span class="text-danger" id="errPostCode"></span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-6">
                                        <input class="form-control form-control-user" id="Note" name="Note" placeholder="Note" data-error="#errNote">
                                        <span class="text-danger" id="errNote"></span>
                                    </div>

                                </div>

                                <input type="submit" value="Save Order" class="btn btn-primary btn-user btn-block" />

                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</body>

<script src="~/Bootstrap Design/vendor/jquery/jquery.min.js"></script>
<script src="~/Bootstrap Design/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="~/Bootstrap Design/vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="~/Bootstrap Design/js/sb-admin-2.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
<script>
        $(document).ready(function () {

            $(function () {

                jQuery.validator.addMethod("noSpace", function (value, element) {
                    return value.indexOf(" ") < 0 && value != "";
                }, "No space please and don't leave it empty");

                jQuery.validator.addMethod("exactlength", function (value, element, param) {
                    return this.optional(element) || value.length == param;
                }, $.validator.format("Please enter exactly {0} characters."));

                $("#Sales_Order_Form").validate({
                    errorPlacement: function (error, element) {
                        var placement = $(element).data('error');
                        if (placement) {
                            $(placement).append(error)
                        } else {
                            error.insertAfter(element);
                        }
                    },
                    rules: {
                        CustomerName: {
                            required: true,
                            noSpace: true,
                            maxlength: 50
                        },
                        InvoiceNo: {
                            required: true,
                            noSpace: true,
                            maxlength: 10
                        },
                        Address1: {
                            required: true,
                            maxlength: 200
                        },
                        Address2: {
                            maxlength: 200
                        },
                        Address3: {
                            maxlength: 200
                        },
                        InvoiceDate: {
                            required: true,
                        },
                        ReferenceNo: {
                            required: true,
                            maxlength: 10
                        },
                        State: {
                            required: true,
                            noSpace: true,
                            maxlength: 50
                        },
                        PostCode: {
                            required: true,
                            noSpace: true,
                            number: true,
                            maxlength: 10
                        },
                        Note: {
                            maxlength: 50
                        }

                    },

                    messages: {
                        CustomerName: {
                            required: "Please provide this field !",
                            noSpace: "Please dont use spaces !",
                            maxlength: "Maximum length execced !"
                        },
                        InvoiceNo: {
                            required: "Please provide this field !",
                            noSpace: "Please dont use spaces !",
                            maxlength: "Maximum length execced !"
                        },
                        Address1: {
                            required: "Please provide this field !",
                            maxlength: "Maximum length execced !"
                        },
                        Address2: {
                            maxlength: "Maximum length execced !"
                        },
                        Address3: {
                            maxlength: "Maximum length execced !"
                        },
                        InvoiceDate: {
                            required: "Please provide this field !",
                        },
                        ReferenceNo: {
                            required: "Please provide this field !",
                            maxlength: "Maximum length execced !"
                        },
                        State: {
                            required: "Please provide this field !",
                            noSpace: "Please dont use spaces !",
                            maxlength: "Maximum length execced !"
                        },
                        PostCode: {
                            required: "Please provide this field !",
                            noSpace: "Please dont use spaces !",
                            number: "Use only numbers",
                            maxlength: "Maximum length execced !"
                        },
                        Note: {
                            maxlength: "Maximum length execced !"
                        }
                    },

                    submitHandler: function (form) {
                        getData();
                    }

                });
            });

        });


        @*function CheckEmail() {

            $("#errInputEmail").html('<label id="InputEmail-error" class="error" for="InputEmail">Checking....</label>')
            var email = $("#InputEmail").val();
            var returnValue = false;

            $.ajax({
                type: "GET",
                url: '@Url.Action("CheckEmail", "SignUp")',
                data: { email: email },
                async: false,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    returnValue = data.exist === true ? false : true
                    if (returnValue == true) {
                        $("#errInputEmail").html('<label id="InputEmail-error" class="error" style="color: green;" for="InputEmail">Email can be used.</label>')
                    }
                }
            });
            return returnValue;
        }*@

        function getData() {
            $('#Sales_Order_Form').submit(function (e) {

                var formData = new FormData();
                formData.append('CustomerName', $('#CustomerName').val());
                formData.append('InvoiceNo', $('#InvoiceNo').val());
                formData.append('Address1', $('#Address1').val());
                formData.append('Address2', $('#Address2').val());
                formData.append('Address3', $('#Address3').val());
                formData.append('InvoiceDate', $('#InvoiceDate').val());
                formData.append('ReferenceNo', $('#ReferenceNo').val());
                formData.append('Note', $('#Note').val());
                formData.append('State', $('#State').val());
                formData.append('PostCode', $('#PostCode').val());


                $.ajax({
                    type: "POST",
                    data: formData,
                    url: '@Url.Action("PostInvoice", "Invoices")',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    contentType: false, // NEEDED, DON'T OMIT THIS (requires jQuery 1.6+)
                    processData: false, // NEEDED, DON'T OMIT THIS
                    //cache: false,
                    success: function (data) {

                    },

                    failure: function (data) {
                        console.log("failure");
                    },
                    error: function (data) {
                        console.log("error");
                    }

                });
            });
        }

</script>